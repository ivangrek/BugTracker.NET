@*
    Copyright 2002-2011 Corey Trager
    Copyright 2017-2019 Ivan Grek

    Distributed under the terms of the GNU General Public License
*@

@model BugTracker.Web.Areas.Administration.Models.Project.EditModel

@{
    var page = (BugTracker.Web.Models.PageModel)ViewBag.Page;

    ViewBag.Title = page.Title;
}

@section Head {
    <script>
        var cls = (navigator.userAgent.indexOf("MSIE") > 0) ? "className" : "class";

        function show_main_settings() {
            document.getElementById("tab1").style.display = "block";
            document.getElementById("tab2").style.display = "none";
            document.getElementById("main_btn").setAttribute(cls, 'tab_btn_pushed');
            document.getElementById("custom_btn").setAttribute(cls, 'tab_btn');
        }

        function show_custom_field_settings() {
            document.getElementById("tab1").style.display = "none";
            document.getElementById("tab2").style.display = "block";
            document.getElementById("main_btn").setAttribute(cls, 'tab_btn');
            document.getElementById("custom_btn").setAttribute(cls, 'tab_btn_pushed');
        }
    </script>
}

@section BodyHeader {
    @Html.Partial("_MainMenu", page)
}

<div class="main">
    <a href="@Url.Action("Index")">back to projects</a>
    &nbsp;&nbsp;&nbsp;&nbsp;

    @if (Model.Id != 0)
    {
        <a href="@Url.Action("UpdateUserPermission", "Project", new { id = Model.Id, label = Model.Name })" id="permissions_href" runat="server" style="font-weight: bold;">per user permissions</a>
    }
    <div>&nbsp;</div>

    <table style="border-collapse: collapse; border: 0;">
        <tr>
            <td>
                @using (Html.BeginForm(Model.Id == 0 ? "Create" : "Update", "Project", FormMethod.Post, new { @class = "frm" }))
                {
                    @Html.AntiForgeryToken()

                    if (Model.Id != 0)
                    {
                        @Html.HiddenFor(x => x.Id)
                    }

                    <br>
                    <a id="main_btn" class="tab_btn_pushed" href="javascript: show_main_settings()">main settings</a>
                    <a id="custom_btn" class="tab_btn" href="javascript: show_custom_field_settings()">custom fields</a>
                    <br>

                    <div id="tab1" style="display: block;">
                        <br>
                        <table border="0">
                            <tr>
                                <td class="lbl">Project Name:</td>
                                <td>
                                    @Html.TextBoxFor(x => x.Name, new { @class = "txt", maxlength = "30", size = "30" })
                                </td>
                            </tr>

                            <tr>
                                <td>&nbsp;</td>
                                <td class="err">
                                    @Html.ValidationMessageFor(x => x.Name)
                                </td>
                            </tr>

                            <tr>
                                <td class="lbl">Active:</td>
                                <td>
                                    @Html.CheckBoxFor(x => x.Active, new { @class = "cb" })
                                </td>
                            </tr>

                            <tr>
                                <td>&nbsp;</td>
                                <td class="err">
                                    @Html.ValidationMessageFor(x => x.Active)
                                </td>
                            </tr>

                            <tr>
                                <td class="lbl">Default Selection in "projects" Dropdown:</td>
                                <td>
                                    @Html.CheckBoxFor(x => x.Default, new { @class = "cb" })
                                </td>
                            </tr>

                            <tr>
                                <td>&nbsp;</td>
                                <td class="err">
                                    @Html.ValidationMessageFor(x => x.Default)
                                </td>
                            </tr>

                            <tr>
                                <td class="lbl">Default User:</td>
                                <td>
                                    @Html.DropDownListFor(x => x.DefaultUser, (List<SelectListItem>)ViewBag.DefaultUsers)
                                </td>
                            </tr>

                            <tr>
                                <td>&nbsp;</td>
                                <td class="err">
                                    @Html.ValidationMessageFor(x => x.DefaultUser)
                                </td>
                            </tr>

                            <tr>
                                <td class="lbl">Auto-Assign New @page.ApplicationSettings.PluralBugLabel to Default User:</td>
                                <td>
                                    @Html.CheckBoxFor(x => x.AutoAssign, new { @class = "cb" })
                                </td>
                            </tr>

                            <tr>
                                <td>&nbsp;</td>
                                <td class="err">
                                    @Html.ValidationMessageFor(x => x.AutoAssign)
                                </td>
                            </tr>

                            <tr>
                                <td colspan="2">
                                    <span class="smallnote">
                                        For the following, see also user page. Make sure user's email is supplied.<br>
                                        Also see "NotificationEmailEnabled", "NotificationEmailFrom", "SmtpServer" settings in Web.config.
                                    </span>
                                </td>
                            </tr>

                            <tr>
                                <td class="lbl">Auto-Subscribe Default User to Notifications:</td>
                                <td>
                                    @Html.CheckBoxFor(x => x.AutoSubscribe, new { @class = "cb" })
                                </td>
                            </tr>

                            <tr>
                                <td>&nbsp;</td>
                                <td class="err">
                                    @Html.ValidationMessageFor(x => x.AutoSubscribe)
                                </td>
                            </tr>

                            <tr>
                                <td colspan="2">
                                    <span class="smallnote">
                                        The following are used by btnet_pop3.exe and btnet_service_pop3.exe<br>
                                        Also see the btnet_service.exe.config file.
                                    </span>
                                </td>
                            </tr>

                            <tr>
                                <td class="lbl">Enable Receiving @page.ApplicationSettings.PluralBugLabel via POP3 (btnet_service.exe):</td>
                                <td>
                                    @Html.CheckBoxFor(x => x.EnablePop3, new { @class = "cb" })
                                </td>
                            </tr>

                            <tr>
                                <td>&nbsp;</td>
                                <td class="err">
                                    @Html.ValidationMessageFor(x => x.EnablePop3)
                                </td>
                            </tr>

                            <tr>
                                <td class="lbl">Pop3 Username:</td>
                                <td>
                                    @Html.TextBoxFor(x => x.Pop3Login, new { @class = "txt", maxlength = "50", size = "30" })
                                </td>
                            </tr>

                            <tr>
                                <td>&nbsp;</td>
                                <td class="err">
                                    @Html.ValidationMessageFor(x => x.Pop3Login)
                                </td>
                            </tr>

                            <tr>
                                <td class="lbl">Pop3 Password:</td>
                                <td>
                                    @Html.TextBoxFor(x => x.Pop3Password, new { @class = "txt", type = "password", maxlength = "20", size = "20" })
                                </td>
                            </tr>

                            <tr>
                                <td>&nbsp;</td>
                                <td class="err">
                                    @Html.ValidationMessageFor(x => x.Pop3Password)
                                </td>
                            </tr>

                            <tr>
                                <td colspan="2">
                                    <span class="smallnote">
                                        The following is used as the "From" email address when you respond to @page.ApplicationSettings.PluralBugLabel generated by emails
                                    </span>
                                </td>
                            </tr>

                            <tr>
                                <td class="lbl">From Email Address:</td>
                                <td>
                                    @Html.TextBoxFor(x => x.Pop3Email, new { @class = "txt", maxlength = "50", size = "30" })
                                </td>
                            </tr>

                            <tr>
                                <td>&nbsp;</td>
                                <td class="err">
                                    @Html.ValidationMessageFor(x => x.Pop3Email)
                                </td>
                            </tr>

                            <tr>
                                <td class="lbl">Description:</td>
                                <td>
                                    @Html.TextAreaFor(x => x.Description, new { @class = "txt", rows = "5", cols = "40" })
                                </td>
                            </tr>

                            <tr>
                                <td>&nbsp;</td>
                                <td class="err">
                                    @Html.ValidationMessageFor(x => x.Description)
                                </td>
                            </tr>
                        </table>
                    </div>

                    <div id="tab2" style="display: none;">
                        <br>
                        <table border="0">
                            <tr>
                                <td colspan="2">
                                    <span class="smallnote">Custom fields for this project only</span>
                                </td>
                            </tr>

                            <tr>
                                <td colspan="2">
                                    <span class="smallnote">
                                        Use the following if you want to have a custom field for this project only.
                                        <br>
                                        1. Check the box to enable the field.
                                        <br>
                                        2. Fill in the label.
                                        <br>
                                        3. Create a list of values. One value per line.
                                        <br>
                                        No individiual value should be longer than the length of your custom field.
                                        <br>
                                        Don't use commas, &gt;, &lt;, or quotes in the list of values.
                                        <br>
                                        Line breaks for your readability are ok.
                                        <br>
                                        Here are some examples:
                                        <br>
                                        "1.0|1.1|1.2"
                                        <br>
                                        "red|blue|green"
                                        <br>
                                        It's ok to have one of the values be blank:<br>
                                        "|red|blue|green"
                                    </span>
                                </td>
                            </tr>

                            <tr>
                                <td colspan="2">
                                    <hr>
                                </td>
                            </tr>

                            <tr>
                                <td class="lbl">Enable Custom Dropdown 1:</td>
                                <td>
                                    @Html.CheckBoxFor(x => x.EnableCustomDropdown1, new { @class = "cb" })
                                </td>
                            </tr>

                            <tr>
                                <td>&nbsp;</td>
                                <td class="err">
                                    @Html.ValidationMessageFor(x => x.EnableCustomDropdown1)
                                </td>
                            </tr>

                            <tr>
                                <td class="lbl">Custom Dropdown Label 1:</td>
                                <td>
                                    @Html.TextBoxFor(x => x.CustomDropdown1Label, new { @class = "txt", maxlength = "30", size = "30" })
                                </td>
                            </tr>

                            <tr>
                                <td>&nbsp;</td>
                                <td class="err">
                                    @Html.ValidationMessageFor(x => x.CustomDropdown1Label)
                                </td>
                            </tr>

                            <tr>
                                <td class="lbl">Custom Dropdown Values 1:</td>
                                <td>
                                    @Html.TextAreaFor(x => x.CustomDropdown1Values, new { @class = "txt", cols = "40", rows = "2" })
                                </td>
                            </tr>

                            <tr>
                                <td>&nbsp;</td>
                                <td class="err">
                                    @Html.ValidationMessageFor(x => x.CustomDropdown1Values)
                                </td>
                            </tr>

                            <tr>
                                <td colspan="2">
                                    <hr>
                                </td>
                            </tr>

                            <tr>
                                <td class="lbl">Enable Custom Dropdown 2:</td>
                                <td>
                                    @Html.CheckBoxFor(x => x.EnableCustomDropdown2, new { @class = "cb" })
                                </td>
                            </tr>

                            <tr>
                                <td>&nbsp;</td>
                                <td class="err">
                                    @Html.ValidationMessageFor(x => x.EnableCustomDropdown2)
                                </td>
                            </tr>

                            <tr>
                                <td class="lbl">Custom Dropdown Label 2:</td>
                                <td>
                                    @Html.TextBoxFor(x => x.CustomDropdown2Label, new { @class = "txt", maxlength = "30", size = "30" })
                                </td>
                            </tr>

                            <tr>
                                <td>&nbsp;</td>
                                <td class="err">
                                    @Html.ValidationMessageFor(x => x.CustomDropdown2Label)
                                </td>
                            </tr>

                            <tr>
                                <td class="lbl">Custom Dropdown Values 2:</td>
                                <td>
                                    @Html.TextAreaFor(x => x.CustomDropdown2Values, new { @class = "txt", cols = "40", rows = "2" })
                                </td>
                            </tr>

                            <tr>
                                <td>&nbsp;</td>
                                <td class="err">
                                    @Html.ValidationMessageFor(x => x.CustomDropdown2Values)
                                </td>
                            </tr>

                            <tr>
                                <td colspan="2">
                                    <hr>
                                </td>
                            </tr>

                            <tr>
                                <td class="lbl">Enable Custom Dropdown 3:</td>
                                <td>
                                    @Html.CheckBoxFor(x => x.EnableCustomDropdown3, new { @class = "cb" })
                                </td>
                            </tr>

                            <tr>
                                <td>&nbsp;</td>
                                <td class="err">
                                    @Html.ValidationMessageFor(x => x.EnableCustomDropdown3)
                                </td>
                            </tr>

                            <tr>
                                <td class="lbl">Custom Dropdown Label 3:</td>
                                <td>
                                    @Html.TextBoxFor(x => x.CustomDropdown3Label, new { @class = "txt", maxlength = "30", size = "30" })
                                </td>
                            </tr>

                            <tr>
                                <td>&nbsp;</td>
                                <td class="err">
                                    @Html.ValidationMessageFor(x => x.CustomDropdown3Label)
                                </td>
                            </tr>

                            <tr>
                                <td class="lbl">Custom Dropdown Values 3:</td>
                                <td>
                                    @Html.TextAreaFor(x => x.CustomDropdown3Values, new { @class = "txt", cols = "40", rows = "2" })
                                </td>
                            </tr>

                            <tr>
                                <td>&nbsp;</td>
                                <td class="err">
                                    @Html.ValidationMessageFor(x => x.CustomDropdown3Values)
                                </td>
                            </tr>
                        </table>
                    </div>

                    <table border="0" style="width: 100%;">
                        <tr>
                            <td class="err">
                                @Html.ValidationMessage("Message")
                            </td>
                        </tr>

                        <tr>
                            <td align="right">
                                <input class="btn" type="submit" value="@(Model.Id == 0 ? "Create" : "Update")" />
                            </td>
                        </tr>
                    </table>
                }
            </td>
        </tr>
    </table>
</div>

@section BodyFooter {
    @Html.Raw(BugTracker.Web.Core.Util.Context.Application["custom_footer"])
}
